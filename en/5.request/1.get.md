# Request message of GET

The GET method is used to get the resource specified by the URL. This URL can be either a static file or a dynamic content generated by a data generation software.

If the GET request contains a conditional field, then the GET request is conditional. The condition fields are: 

1. If-Modified-Since
2. If-Unmodified-Since
4. If-Match
5. If-None-Match
6. If-Range

Under request conditional , only the resource that satisfies the condition will pass the response body to the client. This will achieve the purpose of caching.

If the GET request includes a scope condition, then the GET request will partial. For large files, can be passed in blocks to improve efficiency. If it is in the scene of video playback, you can only deliver the video clips that the user skips, providing a better user experience.

for example,take a partial request to (hello.txt)[../code/hello.txt] . Use the GET method and specify the start byte index and end byte index by the header field of `Range` to issue the following request:

    GET /hello.txt HTTP/1.1
    Range: bytes=0-2

Server response:

    HTTP/1.1 206 Partial Content
    Content-Type: text/html
    Content-Range: bytes 0-2/12
    Content-Length: 3

    Hel

The value of `Content-Range`, the previous set of numbers for "/" indicates the range of return positions, and the last value of "/" indicates the total size of the resource.

### Hands-on 

### Environmental Preparation

Find hello.js in the code code directory and executed by node:

    Node hello.js

### Verify the difference between GET and HEAD

Then we use Netcat to initiate the get:

    GET /hello.htm HTTP/1.1

You can see the response as follows:

    HTTP/1.1 200 OK
    X-Powered-By: Express
    Content-Type: text/html; charset=utf-8
    Content-Length: 22
    ETag: W/"16-FmHX0hamHjYkHeAP/7PfzA"
    Date: Thu, 03 Dec 2015 09:54:01 GMT
    Connection: close

    <h1>Hello, World!</h1>

If using the HEAD method:

    HEAD /hello.htm HTTP/1.1

The response will only send the header of the response message, no the body of the response message. as follows:

    HTTP/1.1 200 OK
    X-Powered-By: Express
    Content-Type: text/html; charset=utf-8
    Content-Length: 22
    ETag: W/"16-FmHX0hamHjYkHeAP/7PfzA"
    Date: Thu, 03 Dec 2015 09:54:01 GMT
    Connection: close


### Verification: Condition Acquisition

In the last case,there is a new item called `ETag` in the response header. which is the identifier of the document. This flag will change if the document changes. The purpose of the server to send this is to support the client's conditional GET. The client can initiate a GET request with ETag,indicating that the document should be send if it changes, otherwise the local buffer will be used. This saves unnecessary network traffic.By the ETag and If-None-Match (and If-Match) header fields can achieve the effect of using the cache. The client can indicate through the If-None-Match header field that a new document will be sent if the document identifier does not match the identifier; otherwise, the server will send 304 Not Modified.

    GET /sample.html HTTP/1.1
    Host: example.com
    If-None-Match: W/"16-FmHX0hamHjYkHeAP/7PfzA"

If the server finds that the specified identity is a match, then the server responds:

    HTTP/1.1 304 Not Modified
    X-Powered-By: Express
    ETag: W/"16-FmHX0hamHjYkHeAP/7PfzA"
    Date: Thu, 03 Dec 2015 09:54:01 GMT
    Connection: close

It will  saves network traffic with returning a response header only than returning the entire file.

It can also be paired with `Last-Modified` and  `If-Modified-Since`, and `If-UnModified-Since` fields to allow the server to decide to send the document or the client to use the cache file according to the modification time.

    GET /sample.html HTTP/1.1
    Host: example.com
    If-Modified-Since: Thu, 03 Dec 2015 09:54:01 GMT

If the file was not modified before the specified time, the server will respond:

    HTTP/1.1 304 Not Modified
    X-Powered-By: Express
    Last-Modified: Thu, 04 Dec 2015 09:54:01 GMT
    Connection: close


### Verification: Partial GET

Enter the following command to view the results.

    Cd code
    Node partial-get.js

then Netcat it :

    $nc localhost 8000
    GET /hello.txt HTTP/1.1
    Range: bytes=0-2

You will get partial document.

